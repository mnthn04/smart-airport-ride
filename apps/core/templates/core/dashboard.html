{% extends 'core/base.html' %}

{% block content %}
<div class="card">
    <h2>Recent Ride Requests</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>User</th>
                <th>Status</th>
                <th>Seats</th>
                <th>Requested At</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for ride in rides %}
            <tr>
                <td>{{ ride.id }}</td>
                <td>{{ ride.user.name }}</td>
                <td><span style="padding: 4px 8px; border-radius: 6px; background: #EEE; font-size: 12px;">{{
                        ride.status }}</span></td>
                <td>{{ ride.seats_required }}</td>
                <td>{{ ride.created_at|date:"H:i" }}</td>
                <td>
                    {% if ride.status != 'cancelled' %}
                    <form action="{% url 'cancel_ride_view' ride.id %}" method="POST" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn"
                            style="background: #e63946; padding: 6px 12px; font-size: 13px;">Cancel</button>
                    </form>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align:center;">No rides found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}